---
- name: Ping all hosts
  hosts: all
  tasks:
    - name: Ping
      ansible.builtin.ping:

    - name: show ip server
      debug:
        msg: "Host IP is {{ ansible_default_ipv4.address }}"

    - name: show pwd
      shell: pwd
      register: current_dir

    - name: Print working directory
      debug:
        msg: "Current working directory is {{ current_dir.stdout }}"

    - name: Run docker-compose up
      shell: docker-compose up -d
      args:
        chdir: /home/user1

    - name: List running containers
      shell: docker container ls
      register: docker_ps_output

    - name: Show running containers
      debug:
        var: docker_ps_output.stdout_lines
